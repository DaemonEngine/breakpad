CXX=g++
CC=gcc

CPPFLAGS=-DNDEBUG
CXXFLAGS=-g3 -O2 -Wall -m32


# These flags are necessary to compile correctly; the 'override'
# command makes sure these are added even if the user sets CPPFLAGS on
# the command line.
override CPPFLAGS+=-I../../.. -D_REENTRANT

.PHONY:all clean

BIN=dump_syms

all:$(BIN)

DUMP_OBJ=dump_symbols.o dump_syms.o file_id.o stabs_reader.o module.o

dump_syms:$(DUMP_OBJ)
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -o $@ $^

dump_symbols.o:../../../common/linux/dump_symbols.cc
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $^

stabs_reader.o:../../../common/linux/stabs_reader.cc
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $^

module.o:../../../common/linux/module.cc
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $^

file_id.o:../../../common/linux/file_id.cc
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $^

clean:
	rm -f $(BIN) $(DUMP_OBJ)
